<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>
  <meta name="description" content="{% if page.description %}{{ page.description | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.description }}{% endif %}">

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ "/assets/img/favicons/apple-touch-icon.png" | prepend: site.baseurl }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ "/assets/img/favicons/favicon-32x32.png" | prepend: site.baseurl }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ "/assets/img/favicons/favicon-16x16.png" | prepend: site.baseurl }}">
  <link rel="manifest" href="{{ "/assets/img/favicons/site.webmanifest" | prepend: site.baseurl }}">
  <link rel="mask-icon" href="{{ "/assets/img/favicons/safari-pinned-tab.svg" | prepend: site.baseurl }}" color="#1971c2">
  <meta name="msapplication-TileColor" content="#1971c2">
  <meta name="theme-color" content="#ffffff">

  <!-- Font preloading for better performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  
  <!-- Preload critical assets -->
  <link rel="preload" href="{{ "/assets/img/3d-printer-icon.svg" | prepend: site.baseurl }}" as="image" type="image/svg+xml">
  
  <!-- Critical CSS inline for performance -->
  <style>
    /* Critical CSS for initial render */
    body {
      font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
    }
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      background-color: rgba(36, 41, 46, 0.95);
      padding: 0.6rem 0.8rem;
    }
    .navbar-icon {
      width: 24px;
      height: 24px;
    }
    .calculator-wrapper {
      min-height: 100vh;
      padding-top: 60px;
    }
  </style>
  
  <!-- Deferred non-critical CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | prepend: site.baseurl }}" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="{{ "/assets/css/calculator.css" | prepend: site.baseurl }}" media="print" onload="this.media='all'">
  
  <!-- Blog CSS only for blog pages -->
  {% if page.layout == 'blog' or page.layout == 'post' %}
  <link rel="stylesheet" href="{{ "/assets/css/blog.css" | prepend: site.baseurl }}" media="print" onload="this.media='all'">
  {% endif %}
  
  <!-- Fallback for CSS loading -->
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ "/assets/css/main.css" | prepend: site.baseurl }}">
    <link rel="stylesheet" href="{{ "/assets/css/calculator.css" | prepend: site.baseurl }}">
    {% if page.layout == 'blog' or page.layout == 'post' %}
    <link rel="stylesheet" href="{{ "/assets/css/blog.css" | prepend: site.baseurl }}">
    {% endif %}
  </noscript>

  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
  
  <!-- Schema.org for SEO -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "3D Print Cost Calculator",
      "description": "A free calculator to estimate the cost of your 3D prints including material, electricity, and failure risk.",
      "url": "{{ site.url }}",
      "applicationCategory": "UtilityApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
  </script>
</head>
